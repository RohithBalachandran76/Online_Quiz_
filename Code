import requests
import json
import pprint
import random
import html
score_correct = 0
score_incorrect = 0
URL = "https://quizapi.io/predefined-quizzes/top-10-common-interview-linux-questions"
endgame = " "
while endgame != "quit":
   r = requests.get(URL)
   if(r.status_code != 200):
      endgame = input("Not working")
   else:
      valid_answer = False
      answer_number = 1
      data = json.loads(r.text)
      ques = data['results'][0]['question']
      answers = data['results'][0]['incorrect_answers']
      correct_answers = ['results'][0]['correct_answers']
      answers.append(correct_answer)
      random.shuffle(answers)
      print(html.unescape(question) + "\n")
      
      for answer in answers:
         print(Str(answer_number) + "-" + html.unescape(answer))
         answer_number += 1
         
      while valid_answer == False:
          user_answer = input("\n Type the number of the correct answer")
          
          try:
             user_answer = int(user_answer)
             if user_answer > len(answer) or user_answer <= 0:
                print("Invalid answer")
             else:
                valid_answer = True
                
          except:
             print("Invalid answer.Use only numbers")
             
      user_answer = answer[int(user_answer)-1]
      if user_answer == correct_answer:
         print("\n Congratulations! You answered correctly! The Correct answer was:" + html.unescape(correct_answer))
         score_correct += 1
         
      else:
          print("Sorry" + html.unescape(user_answer) + "is incorrect")
          score_incorrect+= 1
      print("your score is:")
      print("correct answers:" + str(score_correct))
      print("incorrect answers:" + str(score_incorrect))
      endgame = input("\n Press 'enter' to play again or type 'quit' to exit the game")
print("\n Thanks for playing")      
